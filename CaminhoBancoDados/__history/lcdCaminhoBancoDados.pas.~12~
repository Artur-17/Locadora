unit lcdCaminhoBancoDados;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, cxGraphics, cxLookAndFeels, cxLookAndFeelPainters, Menus,
  dxSkinsCore, dxSkinBlack, dxSkinBlue, dxSkinBlueprint, dxSkinCaramel,
  dxSkinCoffee, dxSkinDarkRoom, dxSkinDarkSide, dxSkinDevExpressDarkStyle,
  dxSkinDevExpressStyle, dxSkinFoggy, dxSkinGlassOceans, dxSkinHighContrast,
  dxSkiniMaginary, dxSkinLilian, dxSkinLiquidSky, dxSkinLondonLiquidSky,
  dxSkinMcSkin, dxSkinMetropolis, dxSkinMetropolisDark, dxSkinMoneyTwins,
  dxSkinOffice2007Black, dxSkinOffice2007Blue, dxSkinOffice2007Green,
  dxSkinOffice2007Pink, dxSkinOffice2007Silver, dxSkinOffice2010Black,
  dxSkinOffice2010Blue, dxSkinOffice2010Silver, dxSkinOffice2013DarkGray,
  dxSkinOffice2013LightGray, dxSkinOffice2013White, dxSkinOffice2016Colorful,
  dxSkinOffice2016Dark, dxSkinPumpkin, dxSkinSeven, dxSkinSevenClassic,
  dxSkinSharp, dxSkinSharpPlus, dxSkinSilver, dxSkinSpringTime, dxSkinStardust,
  dxSkinSummer2008, dxSkinTheAsphaltWorld, dxSkinsDefaultPainters,
  dxSkinValentine, dxSkinVisualStudio2013Blue, dxSkinVisualStudio2013Dark,
  dxSkinVisualStudio2013Light, dxSkinVS2010, dxSkinWhiteprint,
  dxSkinXmas2008Blue, StdCtrls, cxButtons, ExtCtrls, lcdDataModule,Registry;

type
  TCaminhoBancoDados = class(TForm)
    edtBancoDados: TEdit;
    btnLocalizarBancoDados: TcxButton;
    dlgBancoDados: TOpenDialog;
    Label1: TLabel;
    pnlTop: TPanel;
    btnGravar: TcxButton;
    btnFechar: TcxButton;
    procedure btnLocalizarBancoDadosClick(Sender: TObject);
    procedure btnFecharClick(Sender: TObject);
    procedure btnGravarClick(Sender: TObject);
  private
    procedure Salvar;
    { Private declarations }
  public
    { Public declarations }
    class procedure ExibirCaminhoBancoDados();
  end;

var
  CaminhoBancoDados: TCaminhoBancoDados;

implementation

{$R *.dfm}

procedure TCaminhoBancoDados.btnFecharClick(Sender: TObject);
begin
  ModalResult := mrCancel;
end;

procedure TCaminhoBancoDados.btnGravarClick(Sender: TObject);
begin
  dtmPrincipal.conexao.Database := edtBancoDados.Text;

  dtmPrincipal.conexao.Connect();

  ModalResult := mrOk;
  Salvar;
end;

procedure TCaminhoBancoDados.btnLocalizarBancoDadosClick(Sender: TObject);
begin
   if (dlgBancoDados.Execute(self.Handle)) then
   begin
    edtBancoDados.Text := dlgBancoDados.FileName;
   end;
end;

class procedure TCaminhoBancoDados.ExibirCaminhoBancoDados;
var
  lcadastro : TCaminhoBancoDados;
begin
  lcadastro := TCaminhoBancoDados.Create(nil);
  lcadastro.ShowModal();
  FreeAndNil(lcadastro);

end;

procedure TCaminhoBancoDados.Salvar;
var
  Reg: TRegistry;
begin

  Reg := TRegistry.Create;

  Reg.RootKey := HKEY_LOCAL_MACHINE;

  Reg.OpenKey('Software\Locadora', True);

  Reg.WriteString('BancoDeDados',edtBancoDados.Text); //Nome dado ao arquivo de sua aplicação. "Ex: Imagem Gif".dasd
  Reg.CloseKey;

  Reg.Free;
end;


procedure TCaminhoBancoDados.Carregar;
var
  Reg: TRegistry;
begin

  Reg := TRegistry.Create;

  Reg.RootKey := HKEY_LOCAL_MACHINE;

  Reg.OpenKey('Software\Locadora', True);

  edtBancoDados.Text := Reg.ReadString('BancoDeDados'); //Nome dado ao arquivo de sua aplicação. "Ex: Imagem Gif".dasd
  Reg.CloseKey;

  Reg.Free;
end;

end.
